from datetime import datetime
import json

listSyogo = {
    "0101": "新年最速ビンゴ",
    "0102": "おもち食べたい",
    "0103": "明日から仕事",
    "0104": "いつもより重い布団",
    "0105": "イチゴ狩りデート",
    "0106": "色の魔術師",
    "0107": "胃を休めよう",
    "0108": "博打走行",
    "0109": "真ん中を走る",
    "0110": "今日も安全運転",
    "0111": "モチをぶっ叩け",
    "0112": "スリップ注意",
    "0113": "スーツ着てピース！",
    "0114": "手帳をプレゼント",
    "0115": "手を洗おう",
    "0116": "今日から禁酒します",
    "0117": "ビンゴ玉ころりん",
    "0118": "１１８は海上保安庁",
    "0119": "空ぶかし厳禁",
    "0120": "明日から大統領",
    "0121": "最強の好敵手",
    "0122": "カレーは甘口上等",
    "0123": "アーモンド２３粒",
    "0124": "目指せ一攫千金",
    "0125": "パンケーキ食べたい",
    "0126": "月極駐車場",
    "0127": "ハワイへ引っ越し",
    "0128": "プライバシー保護",
    "0129": "湾岸人口上昇中",
    "0130": "電話は３分まで",
    "0131": "愛妻家",
    "0201": "連携プレーを放送",
    "0202": "夫婦で湾岸マキシ",
    "0203": "いざ、鬼ヶ島へ",
    "0204": "横断歩道で一時停止",
    "0205": "ウリ二つ",
    "0206": "抹茶ラテ",
    "0207": "ふるさとは福井県",
    "0208": "つばきのシャンプー",
    "0209": "漫画家志望",
    "0210": "電卓マスター",
    "0211": "湾岸おかわりプレイ",
    "0212": "氷上のＦ１",
    "0213": "積み立ては大切",
    "0214": "放課後までそわそわ",
    "0215": "横風注意！",
    "0216": "天気図読めます",
    "0217": "とにかく寒い",
    "0218": "○人でビンゴ！",
    "0219": "地球は丸い",
    "0220": "事故ゼロを目指して",
    "0221": "４コマ漫画が日課",
    "0222": "ドリフトする猫",
    "0223": "不死身のドライバー",
    "0224": "大同団結",
    "0225": "箱根の水を求めて",
    "0226": "大脱出劇",
    "0227": "強いキズナ",
    "0228": "バカヤロー解散",
    "0229": "４年ぶりだな",
    "0301": "とんかつ日和",
    "0302": "ペットはミニ豚",
    "0303": "耳かきのプロ",
    "0304": "空振り三振！",
    "0305": "エアガール",
    "0306": "夢は世界一周",
    "0307": "今夜はメンチカツ",
    "0308": "ぶんぶんぶん",
    "0309": "みんなサンキュー！",
    "0310": "チョコミント大好き",
    "0311": "上野の大行列",
    "0312": "スイーツ食べ放題",
    "0313": "海底を突き進む",
    "0314": "本命はキャンディー",
    "0315": "オリーブオイル",
    "0316": "公園でピクニック",
    "0317": "漫画もアプリで",
    "0318": "点字読めます",
    "0319": "愛車撮影",
    "0320": "電卓カタカタ",
    "0321": "３！２！１！",
    "0322": "アー、アー、アー",
    "0323": "天気を操る",
    "0324": "最速の人力車",
    "0325": "ドラマチックな展開",
    "0326": "毎日カチューシャ",
    "0327": "お花見日和",
    "0328": "青春サイダー",
    "0329": "かわいいマリモ",
    "0330": "チームワーク抜群！",
    "0331": "耳が気持ち良い",
    "0401": "湾岸の新入生",
    "0402": "５００円札って何？",
    "0403": "資産運用は計画的に",
    "0404": "どら焼きが好物",
    "0405": "湾岸横町",
    "0406": "みんなでお城巡り",
    "0407": "空気圧大丈夫？",
    "0408": "タイヤトレーニング",
    "0409": "湾岸のソムリエ",
    "0410": "マストを立てろ",
    "0411": "ガッツおやじ",
    "0412": "火星に移住",
    "0413": "モーニング文化",
    "0414": "友情ビンゴ！",
    "0415": "パレード見に行こう",
    "0416": "湾岸の喜劇王",
    "0417": "ハローワーク通い",
    "0418": "特許は儲かります",
    "0419": "日本一周ドライブ",
    "0420": "憧れのお嬢様",
    "0421": "広告収入得てます",
    "0422": "道の駅寄ってく？",
    "0423": "とりあえず生で",
    "0424": "湾岸ダービー",
    "0425": "ペンギン飼いたい",
    "0426": "海の猿",
    "0427": "僕の夢あげます",
    "0428": "ワインで乾杯",
    "0429": "昭和って何？",
    "0430": "ヴァルプルギスの夜",
    "0501": "令和のレーサー",
    "0502": "緑茶一気飲み",
    "0503": "スパムメールに注意",
    "0504": "一緒に集めよう",
    "0505": "ＧＯ！ＧＯ！",
    "0506": "ダイエット禁止",
    "0507": "粉まみれだッ！",
    "0508": "苦いの苦手です",
    "0509": "湾岸の呼吸",
    "0510": "黄色い紅茶",
    "0511": "のみ込めません",
    "0512": "ビタミンＣが豊富",
    "0513": "愛しのワンコ",
    "0514": "バラの花束を",
    "0515": "朝食はヨーグルト",
    "0516": "友と旅に出る",
    "0517": "血圧がヤバい",
    "0518": "光ファイバー",
    "0519": "蜂のように刺す",
    "0520": "マイナスイオン",
    "0521": "名探偵",
    "0522": "たまには自転車で",
    "0523": "初めてのラブレター",
    "0524": "接待ゴルフ",
    "0525": "有るの？無いの？",
    "0526": "ラッキーホームラン",
    "0527": "百人一首の達人",
    "0528": "３０００本安打",
    "0529": "福を招く猫",
    "0530": "変わらない吸引力",
    "0531": "禁煙続きません",
    "0601": "はい、チーズ",
    "0602": "路地は進入禁止",
    "0603": "位置情報はＯＮで",
    "0604": "虫が苦手",
    "0605": "寿限無寿限無",
    "0606": "みんなで大合唱",
    "0607": "おふくろに感謝",
    "0608": "秘宝を求めて",
    "0609": "ロックに生きる",
    "0610": "成人病が怖い",
    "0611": "カメハメハ！",
    "0612": "恋人？いねえよ！",
    "0613": "休みなんてない！",
    "0614": "Ｏ型です",
    "0615": "インコとおしゃべり",
    "0616": "フワフワ浮いてる",
    "0617": "首都高のオアシス",
    "0618": "塩むすびが最強",
    "0619": "あの子と野球",
    "0620": "ハッカが苦手",
    "0621": "間食はひかえます",
    "0622": "パーフェクト達成",
    "0623": "４年に一度の",
    "0624": "あ、ＵＦＯだ！",
    "0625": "夢のマイホーム",
    "0626": "温泉旅行",
    "0627": "日なたをよこせ！",
    "0628": "巨大なパフェ",
    "0629": "日本来日",
    "0630": "俺たちはファミリー",
    "0701": "支払いはカードで",
    "0702": "タコ野郎",
    "0703": "辛いのはお好き？",
    "0704": "我ら○銃士",
    "0705": "ウナギよりアナゴ派",
    "0706": "監査お願いします",
    "0707": "朝から運試し",
    "0708": "ナハでナンパ",
    "0709": "絶叫系乗れません",
    "0710": "ねばねばねばねば～",
    "0711": "アコヤガイ",
    "0712": "バリウム飲みます",
    "0713": "オカルトマニア",
    "0714": "ひまわり畑",
    "0715": "お出迎えします",
    "0716": "七色のスーパーカー",
    "0717": "漫画描いてます",
    "0718": "有ガイ物質に注意",
    "0719": "湾岸のサイボーグ",
    "0720": "夢は月へ旅行",
    "0721": "良い景色",
    "0722": "みんなで海行こう",
    "0723": "白米が食いてえ！",
    "0724": "微動だにしない",
    "0725": "あっち～なぁ～！",
    "0726": "驚かすなよ！！",
    "0727": "タネマシンガン",
    "0728": "なにわの爆速運転手",
    "0729": "福神漬けをそえて",
    "0730": "梅酒ロックで",
    "0731": "鳥になりたい",
    "0801": "ゴールデンなあいつ",
    "0802": "ブリーフ一筋",
    "0803": "はちみつ好きなクマ",
    "0804": "ながーい橋を走る",
    "0805": "へいタクシー！",
    "0806": "ハンサムな走り屋",
    "0807": "赤いハイビスカス",
    "0808": "ふくよかなだけ",
    "0809": "体力回復する草",
    "0810": "イカしたハット",
    "0811": "○人で頑張った",
    "0812": "マーメイド",
    "0813": "湾岸のレフティ",
    "0814": "湾岸のエジソン",
    "0815": "毎日刺身",
    "0816": "女子大に潜入",
    "0817": "ナイター実況",
    "0818": "夏の頂点",
    "0819": "実は車よりバイク派",
    "0820": "赤は止まれ",
    "0821": "パーフェクトな走り",
    "0822": "路面電車で通勤",
    "0823": "ウクレレ持った雷様",
    "0824": "大爆発",
    "0825": "ひよこのラーメン",
    "0826": "束になってかかる",
    "0827": "女だってつらいよ",
    "0828": "バイオリニスト",
    "0829": "まずはタンから",
    "0830": "借金するなよ",
    "0831": "夏の終わり",
    "0901": "早速寝坊した",
    "0902": "高額当選で高級車",
    "0903": "すっっぱ～い",
    "0904": "くし打ちの達人",
    "0905": "石炭掘るぞ",
    "0906": "妹が可愛い",
    "0907": "メガネもピカピカに",
    "0908": "アメリカ行こうぜ",
    "0909": "救急車に道を譲る",
    "0910": "こまめに車の点検を",
    "0911": "テレカコレクター",
    "0912": "無重力で走る",
    "0913": "職業はプログラマー",
    "0914": "みんなそろって走る",
    "0915": "８０歳でも現役",
    "0916": "新聞片手に発狂",
    "0917": "ベリーキュート",
    "0918": "細いけどたくましく",
    "0919": "俺こそが山田だ",
    "0920": "ジェットバス",
    "0921": "ランウェイを走る",
    "0922": "湾岸で出勤",
    "0923": "土地が欲しい",
    "0924": "ピッカピカです",
    "0925": "代打主婦",
    "0926": "台風来ないで",
    "0927": "女子○人でビンゴ",
    "0928": "パソコン触れません",
    "0929": "湾岸のお菓子職人",
    "0930": "クレーン操縦士",
    "1001": "大地主です",
    "1002": "豆腐の角で殴るぞ",
    "1003": "山頂までダッシュ",
    "1004": "徒歩で出社",
    "1005": "エコバッグ持参",
    "1006": "お国に貢献",
    "1007": "オートロック便利",
    "1008": "植林活動してます",
    "1009": "デコトラドライバー",
    "1010": "サバ缶大好き",
    "1011": "ウインクができない",
    "1012": "豆乳生活",
    "1013": "落ち葉集めて焼き芋",
    "1014": "熱い友情",
    "1015": "キノコ食って巨大化",
    "1016": "ラスボス参上",
    "1017": "一文無し",
    "1018": "プロドライバーです",
    "1019": "英語マスターになる",
    "1020": "髪は大切に",
    "1021": "ブレーキランプ破損",
    "1022": "スカイミッション",
    "1023": "なまりがきつい",
    "1024": "手乗り文鳥",
    "1025": "ペペロンチーノだけ",
    "1026": "青汁で健康生活",
    "1027": "時代は電子ブック",
    "1028": "特技は速記",
    "1029": "あったかいおしぼり",
    "1030": "初恋は５歳",
    "1031": "仮装してビンゴ",
    "1101": "優雅にハーブティー",
    "1102": "字がキレイです",
    "1103": "いい味出してんねぇ",
    "1104": "世界遺産巡り",
    "1105": "いいご縁がほしい",
    "1106": "結婚願望あります",
    "1107": "博多でもつ鍋",
    "1108": "切れ味抜群",
    "1109": "火消し隊",
    "1110": "いい音奏でてる",
    "1111": "毎日麺食べてる",
    "1112": "美肌の持ち主",
    "1113": "ヒザから崩れ落ちる",
    "1114": "石工職人",
    "1115": "出汁は昆布派",
    "1116": "みんなならんで走る",
    "1117": "香車走行",
    "1118": "白いうさぎ",
    "1119": "サッカーの神様",
    "1120": "ピザとピッツァ",
    "1121": "白髭のおじさん",
    "1122": "湾岸の建築王",
    "1123": "プロゲーマー志望",
    "1124": "進化する湾岸",
    "1125": "丸の内ＯＬ",
    "1126": "いい湯だなぁ",
    "1127": "ノーベル賞受賞",
    "1128": "ワイワイビンゴ",
    "1129": "いい肉食べようぜ",
    "1130": "マジックミラーの車",
    "1201": "ネギ好き",
    "1202": "宇宙に行ってみたい",
    "1203": "キテます",
    "1204": "宇宙人に会いたい",
    "1205": "ボランティア精神",
    "1206": "年上にメロメロ",
    "1207": "ツリーに飾り付け",
    "1208": "悟りを開く",
    "1209": "クレープ大好き",
    "1210": "口座振り込みで",
    "1211": "１００円玉切れ",
    "1212": "バッテリー交換済み",
    "1213": "ビタミン足りてる？",
    "1214": "ペンギンに遭遇",
    "1215": "バスツアー制覇",
    "1216": "筆記試験苦手です",
    "1217": "飛んで行け！",
    "1218": "赤レンガの駅",
    "1219": "空のドライブ",
    "1220": "ぶりぶり",
    "1221": "ダンクシュート",
    "1222": "安月給反対",
    "1223": "３３３メートル",
    "1224": "おもちゃ屋に行列",
    "1225": "今日も一人ですが？",
    "1226": "小さな巨人",
    "1227": "未だに小学生",
    "1228": "今年も頑張った",
    "1229": "歌謡曲歌手",
    "1230": "忘年会でビンゴ！",
    "1231": "滑り込みビンゴ",
}


def getTodayBingoSyogo():
    current_date = datetime.now()
    current_month = current_date.month
    current_day = current_date.day
    mmdd = f"{current_month:02d}{current_day:02d}"
    return listSyogo.get(mmdd, "湾岸の新人")


FRAMES = [
    "flame1",
    "animal1",
    "neon1",
    "metal1",
    "dangerous1",
    "relief1",
    "casual1",
    "floral1",
    "splash1",
    "graffiti1",
    "japonism1",
    "silvercraft1",
    "cosmos1",
    "mechanical1",
    "camo1",
    "digital1",
    "wall1",
    "tropical1",
    "pinstripe1",
    "leather1",
    "tile1",
    "studs1",
    "steel1",
    "wood1",
    "sticker1",
    "thunderbolt1",
    "glitter1",
    "jewel1",
    "tigerstripe1",
    "lines1",
    "circles1",
    "electronic1",
    "fire1",
    "crush1",
    "particle1",
    "leathermesh1",
    "ortega1",
    "splintercamo1",
    "flame2",
    "animal2",
    "neon2",
    "metal2",
    "dangerous2",
    "relief2",
    "casual2",
    "floral2",
    "splash2",
    "graffiti2",
    "japonism2",
    "silvercraft2",
    "cosmos2",
    "mechanical2",
    "camo2",
    "digital2",
    "wall2",
    "tropical2",
    "pinstripe2",
    "leather2",
    "tile2",
    "steel2",
    "wood2",
    "sticker2",
    "thunderbolt2",
    "glitter2",
    "jewel2",
    "tigerstripe2",
    "lines2",
    "circles2",
    "electronic2",
    "fire2",
    "crush2",
    "particle2",
    "leathermesh2",
    "ortega2",
    "splintercamo2",
    "flame3",
    "animal3",
    "neon3",
    "metal3",
    "dangerous3",
    "casual3",
    "floral3",
    "splash3",
    "graffiti3",
    "japonism3",
    "silvercraft3",
    "cosmos3",
    "mechanical3",
    "camo3",
    "digital3",
    "wall3",
    "tropical3",
    "pinstripe3",
    "tile3",
    "studs3",
    "steel3",
    "wood3",
    "thunderbolt3",
    "glitter3",
    "tigerstripe3",
    "lines3",
    "circles3",
    "electronic3",
    "fire3",
    "crush3",
    "particle3",
    "leathermesh3",
    "ortega3",
    "splintercamo3",
    "flame4",
    "animal4",
    "neon4",
    "metal4",
    "dangerous4",
    "casual4",
    "floral4",
    "splash4",
    "graffiti4",
    "japonism4",
    "mechanical4",
    "camo4",
    "digital4",
    "wall4",
    "pinstripe4",
    "steel4",
    "wood4",
    "thunderbolt4",
    "glitter4",
    "tigerstripe4",
    "lines4",
    "circles4",
    "electronic4",
    "fire4",
    "crush4",
    "particle4",
    "leathermesh4",
    "silvercraft4",
    "ortega4",
    "splintercamo4",
    "flame5",
    "animal5",
    "neon5",
    "metal5",
    "dangerous5",
    "casual5",
    "splash5",
    "japonism5",
    "silvercraft5",
    "flame6",
    "animal6",
    "neon6",
    "metal6",
    "dangerous6",
    "casual6",
    "splash6",
    "japonism6",
    "silvercraft6",
    "silvercraft7",
    "animal7",
    "neon7",
    "metal7",
    "dangerous7",
    "casual7",
    "splash7",
    "japonism7",
    "animal8",
    "neon8",
    "casual8",
    "splash8",
    "japonism8",
    "animal9",
    "neon9",
    "animal10",
    "neon10",
    "neon11",
    "neon12",
    "neon13",
    "neon14",
    "neon15",
    "neon16",
    "neon17",
    "neon18",
    "flame1",
    "animal1",
    "neon1",
    "metal1",
    "dangerous1",
    "relief1",
    "casual1",
    "floral1",
    "splash1",
    "graffiti1",
    "japonism1",
    "silvercraft1",
    "cosmos1",
    "mechanical1",
    "camo1",
    "digital1",
    "wall1",
    "tropical1",
    "pinstripe1",
    "leather1",
    "tile1",
    "studs1",
    "steel1",
    "wood1",
    "sticker1",
    "thunderbolt1",
    "glitter1",
    "jewel1",
    "tigerstripe1",
    "lines1",
    "circles1",
    "electronic1",
    "fire1",
    "crush1",
    "particle1",
    "leathermesh1",
    "ortega1",
    "splintercamo1",
    "flame2",
    "animal2",
    "neon2",
    "metal2",
    "dangerous2",
    "relief2",
    "casual2",
    "floral2",
    "splash2",
    "graffiti2",
    "japonism2",
    "silvercraft2",
    "cosmos2",
    "mechanical2",
    "camo2",
    "digital2",
    "wall2",
    "tropical2",
    "pinstripe2",
    "leather2",
    "tile2",
    "studs2",
    "steel2",
    "wood2",
    "sticker2",
    "thunderbolt2",
    "glitter2",
    "jewel2",
    "tigerstripe2",
    "lines2",
    "circles2",
    "electronic2",
    "fire2",
    "crush2",
    "particle2",
    "leathermesh2",
    "ortega2",
    "splintercamo2",
    "flame3",
    "animal3",
    "neon3",
    "metal3",
    "dangerous3",
    "casual3",
    "floral3",
    "splash3",
    "graffiti3",
    "japonism3",
    "silvercraft3",
    "cosmos3",
    "mechanical3",
    "camo3",
    "digital3",
    "wall3",
    "tropical3",
    "pinstripe3",
    "tile3",
    "studs3",
    "steel3",
    "wood3",
    "thunderbolt3",
    "glitter3",
    "tigerstripe3",
    "lines3",
    "circles3",
    "electronic3",
    "fire3",
    "crush3",
    "particle3",
    "leathermesh3",
    "ortega3",
    "splintercamo3",
    "flame4",
    "animal4",
    "neon4",
    "metal4",
    "dangerous4",
    "casual4",
    "floral4",
    "splash4",
    "graffiti4",
    "japonism4",
    "mechanical4",
    "camo4",
    "digital4",
    "wall4",
    "pinstripe4",
    "steel4",
    "wood4",
    "thunderbolt4",
    "glitter4",
    "tigerstripe4",
    "lines4",
    "circles4",
    "electronic4",
    "fire4",
    "crush4",
    "particle4",
    "leathermesh4",
    "silvercraft4",
    "silvercraft5",
    "ortega4",
    "splintercamo4",
    "flame5",
    "flame6",
    "animal5",
    "animal6",
    "neon5",
    "neon6",
    "metal5",
    "dangerous5",
    "casual5",
    "splash5",
    "japonism5",
    "metal6",
    "dangerous6",
    "casual6",
    "splash6",
    "japonism6",
    "silvercraft6",
    "silvercraft7",
    "animal7",
    "neon7",
    "metal7",
    "dangerous7",
    "casual7",
    "splash7",
    "japonism7",
    "animal8",
    "neon8",
    "casual8",
    "splash8",
    "japonism8",
    "animal9",
    "neon9",
    "animal10",
    "neon10",
    "neon11",
    "neon12",
    "neon13",
    "neon14",
    "neon15",
    "neon16",
    "neon17",
    "neon18",
]
FRAMES_LEAP = FRAMES[:59] + ["studs2"] + FRAMES[59:]


def isLeapYear(year: int) -> bool:
    return (year % 4 == 0 and year % 100 != 0) or year % 400 == 0


def getDayOfYear(date: datetime) -> int:
    start = datetime(date.year, 1, 1)
    diff = date - start
    return diff.days + 1


def getTodayBingoCustomFrame() -> str:
    today = datetime.now()
    year = today.year
    day_of_year = getDayOfYear(today)
    frames = FRAMES_LEAP if isLeapYear(year) else FRAMES
    return frames[(day_of_year - 1) % len(frames)]


def getTodayPlateNumber() -> str:
    today = datetime.now()
    month = f"{today.month}"
    day = f"{today.day:02d}"
    plate_number = f"{month}{day}"
    # 如果只有三位则补齐
    if len(plate_number) == 3:
        plate_number = "·" + plate_number
    # 转换为全角字符
    fullWidthPlateNumber = "".join(
        chr(ord(c) + 0xFEE0) if "!" <= c <= "~" else c for c in plate_number
    )
    return fullWidthPlateNumber


def getTodayBingoCustomFramePics() -> str:
    # 获取今天的自定义边框
    todayBingoCustomFrame = getTodayBingoCustomFrame()

    # 使用返回的customFrame名，遍历项目根目录的customFrame.json，找出其对应的图片
    with open("customFrame.json", "r", encoding="utf-8") as f:
        customFrames = json.load(f)
        for customFrame in customFrames:
            if customFrame["customFrame"] == todayBingoCustomFrame:
                return customFrame["src"]
    return ""